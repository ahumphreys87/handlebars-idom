<title>htmlbars-idom ASTs</title>

<script src="node_modules/babel-core/browser.js"></script>
<script src="node_modules/handlebars/dist/handlebars.js"></script>
<script src="node_modules/htmlbars/dist/assets/loader.js"></script>
<script src="node_modules/htmlbars/dist/amd/htmlbars-syntax.amd.js"></script>

<script>
  var babel = window.babel;
  var handlebars = window.Handlebars;
  var htmlbars = window.requireModule('htmlbars-syntax');

  var sourceMarkup = '<div>{{foo}}</div>';
  var targetCode = [
    'function render(data) {',
    '  elementOpen("div");',
    '  text(data.foo);',
    '  elementClose("div");',
    '}'
  ].join('');

  var sourceMarkupClass = '<div class="{{bar}}">foo</div>';
  var targetCodeClass = [
    'function render(data) {',
    '  elementOpenStart("div");',
    '  attr("class", data.bar);',
    '  elementOpenEnd("div");',
    '  elementClose("div");',
    '}'
  ].join('');

  console.log('Markup: ' + sourceMarkup);
  console.log('Handlebars source AST:');
  console.log(handlebars.parse(sourceMarkup));
  console.log('HTMLBars source AST:');
  console.log(htmlbars.parse(sourceMarkup));
  console.log('Target Babel AST:');
  console.log(babel.transform(targetCode).ast);
  
  console.log('\n');
  console.log('Markup: ' + sourceMarkupClass);
  console.log('Handlebars source AST:');
  console.log(handlebars.parse(sourceMarkupClass));
  console.log('HTMLBars source AST:');
  console.log(htmlbars.parse(sourceMarkupClass));
  console.log('Target Babel AST:');
  console.log(babel.transform(targetCodeClass).ast);
</script>
